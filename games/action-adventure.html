<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cheeky Commodore Gamer - Action-Adventure Games</title>
    
    <meta name="description" content="Embark on classic quests! Explore the complete archive of Commodore 64 and Amiga Action-Adventure games.">
    
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link href="https://db.onlinewebfonts.com/c/05eb10077a913e99089a693039e6273e?family=Amiga+Topaz" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="../css/style.css">
    
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

    <style>
        /* === RESTORED ORIGINAL STYLES === */
        :root {
            --c64-blue: #352879; --c64-light-blue: #6c5eb5; --c64-text: #b8c76f; --c64-red: #880000;
            --amiga-blue: #0055AA; --amiga-white: #FFFFFF; --amiga-orange: #FF8800; --amiga-black: #000000;
        }

        body {
            font-family: 'VT323', monospace; margin: 0; padding: 10px; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; /* Adjusted for header flow */
            text-transform: uppercase; overflow-x: hidden; 
            transition: filter 0.3s ease; 
        }

        /* STARFIELD & CRT */
        #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.3; pointer-events: none; }
        .crt-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); background-size: 100% 2px, 3px 100%; pointer-events: none; z-index: 9999; }

        /* MODES */
        body.c64-mode { background-color: var(--c64-blue); color: var(--c64-text); }
        body.amiga-mode { background: linear-gradient(180deg, #0055AA 0%, #003D7A 100%); color: var(--amiga-white); font-family: 'Amiga Topaz', monospace; }

        /* CONTAINER OVERRIDES (To match your look) */
        .container {
            width: 100%; max-width: 1000px; margin-top: 20px; padding: 15px;
            position: relative; z-index: 1;
        }
        body.c64-mode .container {
            border: 4px solid var(--c64-light-blue); background-color: rgba(53, 40, 121, 0.95);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        body.amiga-mode .container {
            border: 3px solid var(--amiga-white); background-color: var(--amiga-white);
            color: var(--amiga-black); box-shadow: 8px 8px 0px rgba(0,0,0,0.5);
        }

        /* TYPOGRAPHY */
        h1 { font-size: 2rem; text-align: center; margin: 10px 0; text-shadow: 2px 2px 0 #000; }
        h2 { font-size: 1.5rem; text-align: center; border-bottom: 2px dashed; padding-bottom: 10px; margin-bottom: 20px; }
        body.c64-mode h1 { color: #fff; animation: textFlicker 0.15s infinite alternate; }
        body.c64-mode h2 { color: #fff; border-color: var(--c64-light-blue); }
        body.amiga-mode h1 { color: var(--amiga-blue); text-shadow: 2px 2px 0 rgba(0,0,0,0.1); }
        body.amiga-mode h2 { color: var(--amiga-black); border-color: var(--amiga-blue); }

        /* GAME GRID & CARDS */
        #game-list-container {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px; margin-bottom: 30px; width: 100%;
        }
        .game-entry {
            border: 2px solid; padding: 8px; display: flex; flex-direction: column;
            box-shadow: 0 0 10px rgba(0,0,0,0.5); transition: transform 0.2s ease;
        }
        body.c64-mode .game-entry { background: #000; border-color: var(--c64-light-blue); }
        body.amiga-mode .game-entry { background: #f0f0f0; border-color: var(--amiga-blue); }
        .game-entry:hover { transform: translateY(-5px); }

        .thumbnail-wrapper {
            position: relative; aspect-ratio: 4/3; background: #000;
            border: 1px solid #444; margin-bottom: 5px; overflow: hidden;
        }
        .thumbnail-wrapper img { width: 100%; height: 100%; object-fit: contain; }
        
        .game-content h3 { font-size: 1.6rem; margin: 5px 0; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        body.c64-mode .game-content h3 { color: #fff; }
        body.amiga-mode .game-content h3 { color: var(--amiga-blue); }

        /* BUTTONS */
        .game-entry-links { display: flex; gap: 5px; justify-content: center; margin-top: auto; }
        .btn-small {
            padding: 5px; min-width: 40px; height: 40px; cursor: pointer;
            display: inline-flex; align-items: center; justify-content: center;
            border: 2px solid #fff; font-size: 1.5rem; text-decoration: none;
        }
        body.c64-mode .btn-small { background: var(--c64-light-blue); color: #fff; }
        body.amiga-mode .btn-small { background: #ccc; color: #000; border-style: outset; }
        .btn-small:hover { transform: translateY(-2px); }

        /* PAGINATION */
        .pagination { display: flex; justify-content: center; gap: 10px; margin: 20px 0; }
        .pagination-btn {
            border: 1px solid; padding: 5px 15px; cursor: pointer; font-family: inherit; font-size: 1.2rem;
        }
        body.c64-mode .pagination-btn { background: var(--c64-blue); color: var(--c64-text); border-color: var(--c64-light-blue); }
        body.amiga-mode .pagination-btn { background: #ccc; color: #000; border: 2px outset #fff; }
        .pagination-btn.current { font-weight: bold; text-decoration: underline; }

        /* EXTRAS (Social Strip, etc) */
        .social-strip {
            display: flex; justify-content: center; flex-wrap: wrap; gap: 15px;
            margin: 20px 0; padding: 10px 0; border-top: 1px dashed; border-bottom: 1px dashed;
        }
        body.c64-mode .social-strip { border-color: rgba(108, 94, 181, 0.5); }
        body.amiga-mode .social-strip { border-color: var(--amiga-blue); }
        
        .social-link-item {
            color: inherit; text-decoration: none; display: flex; align-items: center; gap: 8px;
            padding: 5px 10px; border: 1px solid transparent; transition: all 0.3s;
        }
        .social-link-item:hover { border-color: #fff; background: rgba(255,255,255,0.1); }

        /* ANIMATIONS */
        @keyframes textFlicker { 0% { text-shadow: 2px 2px 0px #000; } 100% { text-shadow: 2.5px 2.5px 0px rgba(0,0,0,0.8); } }
        
        /* HIDE DUPLICATE NAV (Since we inject the Global Header) */
        /* We will rely on global-header-container for navigation now */
    </style>
</head>
<body class="c64-mode">

    <canvas id="starfield"></canvas>
    <div class="crt-overlay"></div>

    <div id="global-header-container"></div>

    <div class="container" id="top">
        
        <h1 id="typewriter-text"><i class="fa-solid fa-dungeon"></i> ACTION-ADVENTURE GAMES</h1>
        
        <h2><i class="fa-solid fa-scroll"></i> EXPLORATION & COMBAT</h2>

        <div class="info-box" style="border: 2px solid; padding: 15px; margin-bottom: 20px; background: rgba(0,0,0,0.4);">
            <p>ACTION-ADVENTURE GAMES COMBINE FAST-PACED COMBAT WITH EXPLORATION AND PUZZLE SOLVING. GET READY FOR EPIC QUESTS!</p>
            <ul style="list-style:none; padding:0; text-align:left; max-width:600px; margin:0 auto;">
                <li><i class="fa-brands fa-youtube"></i> <strong>GAMEPLAY:</strong> INSTANT VIDEO REVIEWS</li>
                <li>üçã <strong>LEMON64:</strong> HISTORY & RATINGS</li>
                <li><i class="fa-solid fa-file-pdf"></i> <strong>MANUALS:</strong> ORIGINAL INSTRUCTIONS</li>
                <li><i class="fa-solid fa-floppy-disk"></i> <strong>DOWNLOAD:</strong> DISK IMAGES</li>
            </ul>
        </div>

        <div class="social-strip">
            <a href="https://www.youtube.com/@CheekyCommodoreGamer" target="_blank" class="social-link-item"><i class="fa-brands fa-youtube"></i> YOUTUBE</a>
            <a href="https://twitter.com/CheekyC64Gamer" target="_blank" class="social-link-item"><i class="fa-brands fa-x-twitter"></i> TWITTER</a>
            <a href="https://discord.gg/83Xw9ktAn4" target="_blank" class="social-link-item"><i class="fa-brands fa-discord"></i> DISCORD</a>
        </div>

        <div id="pagination-container-top" class="pagination"></div>
        <div id="game-list-container"><p style="text-align:center; animation:blink 1s infinite;">LOADING DATABASE...</p></div>
        <div id="pagination-container-bottom" class="pagination"></div>

    </div>

    <button id="back-to-top" onclick="window.scrollTo({top:0, behavior:'smooth'})" style="position:fixed; bottom:20px; right:20px; z-index:100; padding:10px;">‚Üë</button>

    <script src="../js/global.js"></script>

    <script>
        // --- PAGE SPECIFIC LOGIC (CSV FETCHER) ---
        const THIS_PAGE_GENRE = "Action Adventure Games";
        const GOOGLE_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQWiuznK7CJeHvaMSAmdVyzDEdpeNQxXGjhqEzsvzLTV792D_B1B5pA55T6kV7maskDFkn0oU0CQ3JM/pub?gid=1584452405&single=true&output=csv";
        
        let allGames = [], currentPage = 1, gamesPerPage = 24;

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Global Header
            // (Handled by global.js)

            // Fetch Data
            Papa.parse(GOOGLE_SHEET_URL, {
                download: true, header: true, skipEmptyLines: true,
                complete: results => {
                    const raw = results.data;
                    const target = THIS_PAGE_GENRE.toLowerCase();
                    
                    allGames = raw.filter(g => 
                        g.gametitle && g.genre && g.genre.toLowerCase().includes(target)
                    ).sort((a,b) => a.gametitle.localeCompare(b.gametitle));

                    if(allGames.length > 0) renderPage(1);
                    else document.getElementById('game-list-container').innerHTML = "<p>NO GAMES FOUND.</p>";
                }
            });
        });

        function renderPage(page) {
            currentPage = page;
            const start = (page - 1) * gamesPerPage;
            const end = start + gamesPerPage;
            const list = allGames.slice(start, end);
            
            const container = document.getElementById('game-list-container');
            container.innerHTML = '';

            list.forEach(g => {
                const thumb = g.thumblink || `https://i.ytimg.com/vi/${g.videoid}/hqdefault.jpg`;
                
                // Build Buttons
                let btns = '';
                if(g.videoid) btns += `<a href="https://www.youtube.com/watch?v=${g.videoid}" target="_blank" class="btn-small" style="background:#cc0000;"><i class="fa-brands fa-youtube"></i></a>`;
                if(g.pdflink) btns += `<a href="${g.pdflink}" target="_blank" class="btn-small"><i class="fa-solid fa-file-pdf"></i></a>`;
                if(g.disklinks) btns += `<a href="${g.disklinks}" target="_blank" class="btn-small"><i class="fa-solid fa-floppy-disk"></i></a>`;

                const html = `
                    <div class="game-entry">
                        <div class="thumbnail-wrapper">
                            <img src="${thumb}" loading="lazy" onerror="this.src='https://via.placeholder.com/300x200?text=NO+IMAGE'">
                        </div>
                        <div class="game-content">
                            <h3>${g.gametitle}</h3>
                            <div class="game-entry-links">${btns}</div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });

            renderPagination();
        }

        function renderPagination() {
            const total = Math.ceil(allGames.length / gamesPerPage);
            const html = `
                <button class="pagination-btn" onclick="renderPage(${currentPage-1})" ${currentPage===1?'disabled':''}>&lt;</button>
                <span style="padding:5px;">PAGE ${currentPage} OF ${total}</span>
                <button class="pagination-btn" onclick="renderPage(${currentPage+1})" ${currentPage===total?'disabled':''}>&gt;</button>
            `;
            document.getElementById('pagination-container-top').innerHTML = html;
            document.getElementById('pagination-container-bottom').innerHTML = html;
        }

        // --- RESTORE STARFIELD ---
        const cvs = document.getElementById('starfield');
        const cx = cvs.getContext('2d');
        let stars = [];
        function initStars() {
            cvs.width = window.innerWidth; cvs.height = window.innerHeight;
            stars = Array(100).fill().map(() => ({
                x: Math.random() * cvs.width, y: Math.random() * cvs.height,
                size: Math.random() * 2, speed: Math.random() * 3 + 0.5
            }));
        }
        function drawStars() {
            cx.clearRect(0,0,cvs.width,cvs.height); cx.fillStyle = "#fff";
            stars.forEach(s => {
                cx.fillRect(s.x, s.y, s.size, s.size);
                s.y += s.speed;
                if(s.y > cvs.height) s.y = 0;
            });
            requestAnimationFrame(drawStars);
        }
        window.addEventListener('resize', initStars); initStars(); drawStars();
    </script>
</body>
</html>
